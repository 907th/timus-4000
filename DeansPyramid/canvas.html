<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Graph Algorithms Comparison</title>
			<style type="text/css">
.inline-div {
    display:inline-block;
}
.inline-txtarea {
    resize: none;
    border : 2px solid red;
    height:125px;
}
			</style>
	</head>
	<script>

		function fillText(text, x, y, color, canvasId) {
			CN = 30;
			YC = 200;
			x = x * CN;
			y = YC - y * CN;

			var c = document.getElementById(canvasId);
			var ctx = c.getContext("2d");
			ctx.font = "18px serif";
			ctx.fillText(text, x, y);
		}
	
		function drawLine(x1, y1, x2, y2, color, canvasId) {

			CN = 30;
			YC = 200;
			
			x1 = x1 * CN;
			y1 = YC - y1 * CN;

			x2 = x2 * CN;
			y2 = YC - y2 * CN;

			var c = document.getElementById(canvasId);
			var ctx = c.getContext("2d");
			ctx.beginPath();
			ctx.moveTo(x1, y1);
			ctx.lineTo(x2, y2);
			ctx.strokeStyle = color;
			ctx.stroke();
		}

		window.onload = function() {
			obj = {
"a1": 1.0,
"a2": 1.9,
"x": 20.05,
"y": 0.0,
"list": [
{"x": "20.128300511301738", "y": "-0.03309959744509472", "vx": "-0.053909405485067674", "vy": "0.9985458306959398", "edge": "0"}
,{"x": "20.25407278656643", "y": "-2.3627372544117455", "vx": "-0.053909405485067674", "vy": "0.9985458306959398", "edge": "3"}
,{"x": "20.25407278656643", "y": "-2.3627372544117455", "vx": "-0.5534689730407871", "vy": "0.8328697952748523", "edge": "4"}
,{"x": "20.25407278656643", "y": "-2.3627372544117455", "vx": "-0.8997130355990587", "vy": "0.4364819052069913", "edge": "1"}
,{"x": "18.155015033018426", "y": "-1.3444117537724187", "vx": "0.8997130355990587", "vy": "-0.4364819052069914", "edge": "0"}
,{"x": "16.055957279470423", "y": "-0.3260862531330919", "vx": "0.8997130355990587", "vy": "-0.4364819052069914", "edge": "3"}
,{"x": "16.055957279470423", "y": "-0.3260862531330919", "vx": "0.5534689730407871", "vy": "-0.8328697952748524", "edge": "2"}
,{"x": "16.055957279470423", "y": "-0.3260862531330919", "vx": "0.05390940548506756", "vy": "-0.9985458306959399", "edge": "1"}
,{"x": "16.055957279470423", "y": "-0.3260862531330919", "vx": "-0.4605835153906153", "vy": "-0.887616372849454", "edge": "4"}
,{"x": "16.055957279470423", "y": "-0.3260862531330919", "vx": "-0.847490974939258", "vy": "-0.5308098034103216", "edge": "3"}
,{"x": "14.078735174620364", "y": "-1.5644815963392231", "vx": "-0.8474909749392582", "vy": "-0.5308098034103214", "edge": "0"}
,{"x": "12.840339831414234", "y": "0.4127405085108353", "vx": "0.5308098034103212", "vy": "-0.8474909749392583", "edge": "2"}
,{"x": "12.840339831414234", "y": "0.4127405085108353", "vx": "0.026964507264728488", "vy": "-0.9996363915684388", "edge": "1"}
,{"x": "12.840339831414234", "y": "0.4127405085108353", "vx": "-0.48435018147497194", "vy": "-0.8748742205055309", "edge": "4"}
,{"x": "12.840339831414234", "y": "0.4127405085108353", "vx": "-0.861495844875345", "vy": "-0.5077646199397059", "edge": "3"}
,{"x": "10.830443940964079", "y": "-0.7718897238966915", "vx": "-0.8614958448753453", "vy": "-0.5077646199397057", "edge": "0"}
,{"x": "9.645813708556553", "y": "1.2380061665534627", "vx": "0.5077646199397056", "vy": "-0.8614958448753454", "edge": "2"}
,{"x": "9.645813708556553", "y": "1.2380061665534627", "vx": "8.326672684688674E-16", "vy": "-0.9999999999999994", "edge": "1"}
,{"x": "9.645813708556553", "y": "1.2380061665534627", "vx": "-0.5077646199397042", "vy": "-0.8614958448753463", "edge": "4"}
,{"x": "9.645813708556553", "y": "1.2380061665534627", "vx": "-0.8748742205055301", "vy": "-0.48435018147497394", "edge": "3"}
,{"x": "7.6047056626909555", "y": "0.10800252802610988", "vx": "-0.8748742205055303", "vy": "-0.4843501814749737", "edge": "0"}
,{"x": "6.474702024163603", "y": "2.149110573891707", "vx": "0.48435018147497366", "vy": "-0.8748742205055304", "edge": "2"}
,{"x": "6.474702024163603", "y": "2.149110573891707", "vx": "-0.026964507264726767", "vy": "-0.9996363915684392", "edge": "1"}
,{"x": "6.474702024163603", "y": "2.149110573891707", "vx": "-0.5308098034103201", "vy": "-0.8474909749392596", "edge": "4"}
,{"x": "6.474702024163603", "y": "2.149110573891707", "vx": "-0.8876163728494536", "vy": "-0.4605835153906176", "edge": "3"}
,{"x": "4.40386615107297", "y": "1.0745552869458534", "vx": "-0.8876163728494538", "vy": "-0.46058351539061737", "edge": "0"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "0.8876163728494539", "vy": "0.46058351539061726", "edge": "1"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "0.5308098034103206", "vy": "0.8474909749392596", "edge": "2"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "0.0269645072647271", "vy": "0.9996363915684395", "edge": "3"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "-0.48435018147497355", "vy": "0.8748742205055309", "edge": "4"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "-0.8614958448753464", "vy": "0.5077646199397051", "edge": "1"}
,{"x": "2.3330302779823358", "y": "1.4285690311224635E-16", "vx": "-1.0", "vy": "-1.8369701987210297E-16", "edge": "2"}
,{"x": "0.0", "y": "0.0", "vx": "0.0", "vy": "1.0", "edge": "0"}
]}
;

			for(i = 0; i < obj.list.length; i++) {
				c = obj.list[i];
				c.x = parseFloat(c.x);
				c.y = parseFloat(c.y);
				c.vx = parseFloat(c.vx);
				c.vy = parseFloat(c.vy);
				
				if(c.edge == 0) {

					edgeLength = Math.sqrt(2 * obj.a1 * obj.a1) / 2.0;
				
					angle = Math.PI / 4.0;
				
					dvx =  Math.cos(angle) * c.vx + Math.sin(angle) * c.vy;
					dvy = -Math.sin(angle) * c.vx + Math.cos(angle) * c.vy;
					
					x1 = dvx * edgeLength + c.x;
					y1 = dvy * edgeLength + c.y;

					angle = Math.PI / 4.0 + Math.PI / 2.0;
				
					dvx =  Math.cos(angle) * c.vx + Math.sin(angle) * c.vy;
					dvy = -Math.sin(angle) * c.vx + Math.cos(angle) * c.vy;
					
					x2 = dvx * edgeLength + c.x;
					y2 = dvy * edgeLength + c.y;
									
					angle = Math.PI / 4.0 + Math.PI;
				
					dvx =  Math.cos(angle) * c.vx + Math.sin(angle) * c.vy;
					dvy = -Math.sin(angle) * c.vx + Math.cos(angle) * c.vy;
					
					x3 = dvx * edgeLength + c.x;
					y3 = dvy * edgeLength + c.y;
									
					angle = Math.PI / 4.0 + 1.5 * Math.PI;
				
					dvx =  Math.cos(angle) * c.vx + Math.sin(angle) * c.vy;
					dvy = -Math.sin(angle) * c.vx + Math.cos(angle) * c.vy;
					
					x4 = dvx * edgeLength + c.x;
					y4 = dvy * edgeLength + c.y;
									
					drawLine(x1, y1, x2, y2, "#FF0000", "canvas");
					drawLine(x2, y2, x3, y3, "#FF0000", "canvas");
					drawLine(x3, y3, x4, y4, "#FF0000", "canvas");
					drawLine(x4, y4, x1, y1, "#FF0000", "canvas");
				
					drawLine(x1, y1, c.x, c.y, "#FF0000", "canvas");
					drawLine(x2, y2, c.x, c.y, "#FF0000", "canvas");
					drawLine(x3, y3, c.x, c.y, "#FF0000", "canvas");
					drawLine(x4, y4, c.x, c.y, "#FF0000", "canvas");
					
					fillText(c.edge, c.x, c.y, "#FF0000", "canvas");
				
				} else {

					angle = Math.acos((obj.a1 * obj.a1 - obj.a2 * obj.a2 - obj.a2 * obj.a2) / (- 2 * obj.a2 * obj.a2)) / 2.0;
					
					console.log(angle);
					
					dvx =  Math.cos(angle) * c.vx + Math.sin(angle) * c.vy;
					dvy = -Math.sin(angle) * c.vx + Math.cos(angle) * c.vy;
					
					edgeLength = obj.a2;
					
					x1 = dvx * edgeLength + c.x;
					y1 = dvy * edgeLength + c.y;

					dvx =  Math.cos(-angle) * c.vx + Math.sin(-angle) * c.vy;
					dvy = -Math.sin(-angle) * c.vx + Math.cos(-angle) * c.vy;
					
					x2 = dvx * edgeLength + c.x;
					y2 = dvy * edgeLength + c.y;

					drawLine(x1, y1, x2, y2, "#FF0000", "canvas");
					drawLine(x2, y2, c.x, c.y, "#FF0000", "canvas");
					drawLine(c.x, c.y, x1, y1, "#FF0000", "canvas");
					
					tx = (x1 + x2 + c.x) / 3.0;
					ty = (y1 + y2 + c.y) / 3.0;

					fillText(c.edge, tx, ty, "#FF0000", "canvas");
				}
			}
		};		

	</script>

	<body>
		<div class="inline-div">
			<p align="center"><font size="5" color="black" face="Arial">Deans Pyramid 2</font></p>
			<canvas id="canvas" width="1000" height="600" style="border:1px solid #000000;">
			</canvas>
		</div>
	</body>
</html>